<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Little Pony</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/style/style.css">
  <link href="assets/images/logo.jpg" rel="icon">
</head>

<body data-bs-theme="light">
  <div class="container-fluid p-0 top-0 fixed-top bg-opacity-13" style="background-color: lightpink;">
    <div class="row g-3">
      <div class="col-12 font">
        <nav class="navbar navbar-expand-lg p-4">
          <div class="container flex-lg-column align-items-lg-center">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
              aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarNavDropdown">
              <ul class="navbar-nav nav-underline nav-menu">
                <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="comics.html">Comics</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="characters.html">Characters</a>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>

  <div class="container-fluid p-0 position-relative">
    <div class="row g-0">
      <div class="col position-relative">
        <img src="assets/images/bg1.jpg" class="img-fluid w-100" style=" height: 800px; object-fit: cover;">
        <div
          class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center bg-dark bg-opacity-50 text-center text-white">
          <h1 class="font display-4">Hello, Pony Lover!</h1>
          <p class="font fs-4">Step into a world of friendship, magic, and pastel ponies.</p>
        </div>
      </div>
    </div>
  </div>
  <div class="container my-5">
    <div class="row">
      <div class="col">
        <div class="text-center mb-4">
          <h1 class="font display-3">Little Pony Songs</h1>
        </div>
        <div class="row">
          <div class="col">

            <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-indicators" id="indicator">
              </div>
              <div class="carousel-inner" id="content1">
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container my-5">
      <div class="text-center mb-4">
        <h1 class="font display-3">Little Pony Episodes</h1>
      </div>
      <div class="container py-5">
        <div class="row min-vh-100 top-0 p-0 align-items-center text-center">
          <div class="col p-5 bg-body-tertiary bg-opacity-50 rounded-5 shadow-lg">
            <div class="row g-4" id="contents1">
            </div>
          </div>
        </div>

      </div>
      <div class="row mb-4">
        <div class="col d-flex justify-content-between align-items-center">
          <nav aria-label="Page navigation">
            <ul class="pagination mb-0">
              <li class="page-item">
                <a class="page-link bg-success text-white" style="cursor:pointer" onclick="prevPage()">&laquo;
                  Previous</a>
              </li>
              <li class="page-item">
                <a class="page-link bg-success text-white" style="cursor:pointer" onclick="nextPage()">Next &raquo;</a>
              </li>
            </ul>
          </nav>
          <div class="h6 font mb-0" id="pageText">Page 1</div>
        </div>
      </div>

      <script>
        var contents1 = document.getElementById("contents1");
        var pageText = document.getElementById("pageText");
        var page = 1;
        var itemsPerPage = 9;
        function nextPage() {
          page++;
          contents1.innerHTML = "";
          pageText.innerHTML = "Page " + page;
          getEpisodes();
        }

        function prevPage() {
          if (page > 1) {
            page--;
            contents1.innerHTML = "";
            pageText.innerHTML = "Page " + page;
            getEpisodes();
          }
        }

        const getEpisodes = async () => {
          const response = await fetch("https://ponyapi.net/v1/episode/all");
          const episodesData = await response.json();
          const episodesArray = episodesData.data;

          var start = (page * itemsPerPage) - itemsPerPage;
          var end = page * itemsPerPage;

          for (let i = start; i < end; i++) {
            if (!episodesArray[i]) break;

            const episodes = episodesArray[i];
            const episodesID = episodes.id;
            const episodesName = episodes.name;
            const episodesWrittenby = episodes.writtenby;
            const episodesStoryboard = episodes.storyboard;
            const image = episodes.image;

            contents1.innerHTML +=
              '<div class="col-12 col-md-6 col-lg-4">' +
              '<div class="card shadow h-100">' +
              '<div class="ratio ratio-1x1 bg-secondary bg-opacity-10 overflow-hidden">' +
              '<img src="' + image + '" class="card-img-top w-100 h-100 object-fit-cover">' +
              '</div>' +
              '<div class="card-body">' +
              '<h6 class="text-success small mb-1">Episode #' + episodesID + '</h6>' +
              '<h5 class="card-title font">' + episodesName + '</h5>' +
              '<p class="card-text small mb-1 text-muted">Written by: <br><strong>' + episodesWrittenby + '</strong></p>' +
              '<p class="card-text small text-muted">Storyboard: <br><strong>' + episodesStoryboard + '</strong></p>' +
              '</div>' +
              '</div>' +
              '</div>';
          }
        }

        getEpisodes();
      </script>
      <script>
        var indicator = document.getElementById("indicator");
        var content1 = document.getElementById("content1");
        const getSongs = async () => {
          const response = await fetch("https://ponyapi.net/v1/song/all");
          const songData = await response.json();
          const youtubeParams = "?rel=0";

          for (let i = 0; i <= 30; i++) {
            const songsArray = songData.data;
            const song = songsArray[i];

            const songID = song.id;
            const songName = song.name;

            const standardWatchURL = song.video;
            const startOfId = standardWatchURL.indexOf("v=") + 2;
            const videoId = standardWatchURL.substring(startOfId, startOfId + 11);
            const baseEmbedUrl = `https://www.youtube.com/embed/${videoId}`;
            const finalEmbedUrl = baseEmbedUrl + youtubeParams;

            const isActive = (i === 1) ? ' active' : '';

            indicator.innerHTML += `
              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="`+ [i] + `" class="` + isActive + `" aria-label="` + [i + 1] + `"></button>
            `;

            content1.innerHTML += `
              <div class="carousel-item rounded-5 `+ isActive + `">
                <div class="d-flex justify-content-center rounded-5">
                    <iframe width="1000" height="700" 
                      src="`+ finalEmbedUrl + `" 
                      title="YouTube video player: `+ songName + `" 
                      frameborder="0" 
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                      allowfullscreen>
                    </iframe>
                </div>

                <div class="carousel-caption d-none d-md-block">
                  <h5>`+ songName + `</h5>
                  <p>`+ songID + `.</p>
                </div>
              </div>
            `;
          }
        }
        getSongs();
      </script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>

</html>